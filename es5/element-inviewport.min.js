"use strict";(function(){function n(n,t,e){var o;return function(){var i=this,u=arguments,r=function(){o=null,e||n.apply(i,u)},c=e&&!o;clearTimeout(o),o=setTimeout(r,t),c&&n.apply(i,u)}}var t=function(){var t=!1,e=[],o=["scroll","hashchange","touchend","resize"],i=[],u=function(n){var t=n.getBoundingClientRect();return null!==n.offsetParent&&t.bottom>=0&&t.top<=window.innerHeight&&t.right>=0&&t.left<=window.innerWidth},r=function(n,t){return n.dispatchEvent(new CustomEvent("viewport:"+t,{bubbles:!0}))},c=function(){e.length>0&&!t?l():0===e.length&&t&&h()},a=0,s=function(){console.log(++a),e.forEach(function(n){"in"!==n.status||u(n.element)?"out"===n.status&&u(n.element)&&(r(n.element,"in"),n.status="in"):(r(n.element,"out"),n.status="out")})},f=n(s,250),l=function(){t=!0,o.concat(i).forEach(function(n){return window.addEventListener(n,f)})},h=function(){t=!1,o.concat(i).forEach(function(n){return window.removeEventListener(n,f)})};return{add:function(n){var t={element:n,status:u(n)?"in":"out"};e.push(t),r(n,t.status),c()},remove:function(n){var t=e.filter(function(t){return t.element!==n});return t.length!==e.length?(e=t,c(),!0):!1},addListener:function(n){h(),i.push(n),c()},removeListener:function(n){h(),i=i.filter(function(t){return t!==n}),c()}}}();window.viewportwatcher=t}).call(void 0);