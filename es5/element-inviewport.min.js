"use strict";(function(){function n(n,t,e){var o,i,u=t||150;return function(){var t=e||this,r=+new Date,c=arguments;o&&o+u>r?(clearTimeout(i),i=setTimeout(function(){o=r,n.apply(t,c)},u)):(o=r,n.apply(t,c))}}var t=function(){var t=!1,e=[],o=["scroll","hashchange","touchend","resize"],i=[],u=function(n){var t=n.getBoundingClientRect();return null!==n.offsetParent&&t.bottom>=0&&t.top<=window.innerHeight&&t.right>=0&&t.left<=window.innerWidth},r=function(n,t){return n.dispatchEvent(new CustomEvent("viewport:"+t,{bubbles:!0}))},c=function(){e.length>0&&!t?a():0===e.length&&t&&s()},a=function(){t=!0,o.concat(i).forEach(function(n){return window.addEventListener(n,h)})},s=function(){t=!1,o.concat(i).forEach(function(n){return window.removeEventListener(n,h)})},f=0,l=function(){console.log(++f),e.forEach(function(n){"in"!==n.status||u(n.element)?"out"===n.status&&u(n.element)&&(r(n.element,"in"),n.status="in"):(r(n.element,"out"),n.status="out")})},h=n(l,50);return{add:function(n){var t={element:n,status:u(n)?"in":"out"};e.push(t),r(n,t.status),c()},remove:function(n){var t=e.filter(function(t){return t.element!==n});return t.length!==e.length?(e=t,c(),!0):!1},addListener:function(n){s(),i.push(n),c()},removeListener:function(n){s(),i=i.filter(function(t){return t!==n}),c()}}}();window.viewportwatcher=t}).call(void 0);