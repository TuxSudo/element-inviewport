var inStalk=function(){"use strict";var t=!1;if("undefined"!=typeof window&&"function"!=typeof window.CustomEvent){var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0},e=document.createEvent("CustomEvent");return e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),e};n.prototype=window.Event.prototype,window.CustomEvent=n,t=!0}var e=function(t,n,e){return t.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:e}))},o=function(t){var n=t.getBoundingClientRect();return null!==t.offsetParent&&n.bottom>=0&&n.top<=window.innerHeight&&n.right>=0&&n.left<=window.innerWidth},i=function(t){var n=t.getBoundingClientRect();return null!==t.offsetParent&&n.top<=window.innerHeight&&n.top>=0?"enter":"exit"},u=function(t){var n=t.getBoundingClientRect();return null!==t.offsetParent&&n.bottom<=window.innerHeight&&n.bottom>=0?"enter":"exit"},r=!1,l=!1,a=[],c=["load","scroll","hashchange","touchend","resize"],s=[],f=function(){a.length>0&&!r?m():0===a.length&&r&&d()},m=function(){r=!0,c.concat(s).forEach(function(t){return window.addEventListener(t,w)})},d=function(){r=!1,c.concat(s).forEach(function(t){return window.removeEventListener(t,w)})},v=function(t){var n=o(t.element),r=i(t.element),l=u(t.element);t.top!==r&&(t.top=r,e(t.element,"in-stalk.top."+r)),t.bottom!==l&&(t.bottom=l,e(t.element,"in-stalk.bottom."+l)),"in"!==t.status||n?"out"===t.status&&n?(e(t.element,"in-stalk.in"),e(t.element,t.element.getBoundingClientRect().top<0?"in-stalk.in.top":"in-stalk.in.bottom"),t.status="in"):"new"===t.status&&(t.status=n?"in":"out",t.top=r,t.bottom=l,n&&e(t.element,"in-stalk.in")):(e(t.element,"in-stalk.out"),e(t.element,t.element.getBoundingClientRect().bottom<0?"in-stalk.out.top":"in-stalk.out.bottom"),t.status="out")},w=function(){l=!0,a.forEach(v)},b={add:function(t){var n={element:t,status:"new"};a.push(n),l&&v(n),f()},remove:function(t){var n=a.filter(function(n){return n.element!==t});return n.length!==a.length&&(a=n,f(),!0)},listenFor:function(t){d(),s=s.filter(function(n){return n!==t}).concat(t),f()},ignore:function(t){d(),s=s.filter(function(n){return n!==t}),f()},check:w};return b}();
